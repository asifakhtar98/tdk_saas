# Epic 2 Retrospective: Authentication & Organization

## Epic Summary

* Epic 2 completed: Auth features and the domain layer for user and organization entities.
* Core authentication via email magic links is solid.
* RBAC permission and state management with AuthBloc successfully validated.

## Code Validation
* Full testing in `test/features/auth/` demonstrates solid use of Supabase for `magic_links` and robust organizational logic in local database `organizations` table.
* Integration testing passed correctly.

## Key Insights & Action Items

* Authentication and state mapping works flawlessly.
* **Blockers Encountered:** The `softDeleteUser` tests required careful attention to constraint limits and unique indices.
* **Architecture Win:** Utilizing riverpod/bloc mapped flawlessly with usecases.
* **Action Item:** We must maintain data integrity where tests have cross-dependencies (for example, creating users requires creating valid mock organizations beforehand).

## Preparation for Next Epic (Epic 3)
* Next Epic will handle tournaments. It is crucial to enforce RBAC when checking tournament modification rights based on the current user organization.
